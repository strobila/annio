# 基本仕様（アノテーション作成・可視化アプリ）

## 目的
画像内物体検出／認識、画像内テキスト検出／認識向けのアノテーションデータを作成・可視化し、複数形式での入出力と比較を支援する。

## 対象データ
- 画像（JPEG/PNG/TIFF など）
- アノテーション
  - 物体検出：バウンディングボックス、ポリゴン、セグメンテーションマスク
  - テキスト検出：バウンディングボックス、四角形（四隅座標）
  - テキスト認識：文字列ラベル（行・単語・文字）

## 主要機能（モード別）
### 1. 作成・編集モード
- 画像上でアノテーションを作成（ボックス、ポリゴン、テキスト領域）
- 作成済みアノテーションの表示・編集・削除
- ラベル（クラス名/文字列）と属性（信頼度、タグ）の編集
- 画像とアノテーションを同時表示
- アノテーションの一覧表示（クラス/座標/文字列）
- クリックで対象領域へハイライト

### 2. 読取専用モード
- アノテーションデータを読み込み、画像とともに表示
- アノテーションの一覧表示（クラス/座標/文字列）
- クリックで対象領域へハイライト
- 編集操作は不可

### 3. 左右比較モード
- 2つのアノテーションデータを読み込み
- 画面左右に同一画像を表示し、各アノテーションをオーバーレイ表示
- 差分ハイライト
  - 位置差分（重なり率や中心距離による差分判定）
  - ラベル差分（クラス名/文字列の不一致）
- いずれかを正解データ（Ground Truth）として評価指標を算出
  - 検出率（例：Precision/Recall/F1）
  - 認識率（例：正解率/誤り率）
- テキスト正解比較（編集距離）
  - 正解情報がテキストの場合、編集距離（Levenshtein など）を計算
  - 比較表示（左右）
  - 差分の色分け表示
    - 挿入：緑
    - 置換：黄
    - 削除：赤

### 共通機能（全モード）
- 多様なフォーマット対応（読み込み/保存）
  - 入出力フォーマット例
    - COCO（JSON）
    - Pascal VOC（XML）
    - YOLO（TXT）
    - ICDAR（TXT/JSON）
    - 独自CSV/JSON（拡張ポイントとして定義）
  - 形式変換（読み込み → 保存）
  - マッピング設定（クラス名/ID、座標系、文字コード）

## 画面構成（例）
### 作成・編集モード／読取専用モード（共通UI）
- ツールバー（ファイル読込・保存）
  - 画像ファイルまたは画像ファイルパスの読み込み
  - アノテーションデータファイルの読み込み
  - アノテーションデータの保存（作成・編集モードのみ）
- キャンバス領域
  - 画像とアノテーションの表示

### 補助領域（必要に応じて）
- 左ペイン：画像リスト/アノテーション一覧
- 右ペイン：プロパティ（ラベル/座標/属性）

### 左右比較モード
- 左右に共通UI（作成・編集モード／読取専用モードの画面構成）を並列配置
  - 各側にツールバーとキャンバス領域を配置
- 差分サマリ（全体の比較結果を集約表示）

## 非機能要件（最低限）
- 大量画像の読み込みに耐えるパフォーマンス
- Undo/Redo 対応
- 自動保存/バックアップ
- 日本語/英語 UI
- Webサーバー不要で、HTMLをブラウザで開くだけでローカル利用可能

## 技術スタック
- TypeScript + React で実装

## 受け入れ条件（例）
- 画像とアノテーションを同時に可視化できる
- 複数フォーマットで入出力できる
- 比較モードで左右に表示でき、差分が可視化される
- テキスト比較で挿入/置換/削除が色分けされる

## 用語
- アノテーション：画像内の物体/文字に付与されるラベルと領域情報
- 編集距離：2つの文字列の差分量を測る指標
